webpackJsonp([0],[,function(t,e,i){function s(t){i(12)}var n=i(0)(i(5),i(23),s,null,null);t.exports=n.exports},,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),n=i(1),a=i.n(n),o=i(2);s.a.config.productionTip=!1,s.a.use(o.a),s.a.http.options.emulateJSON=!0,s.a.http.options.emulateHTTP=!0,new s.a({el:"#app",template:"<App/>",components:{App:a.a}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(21),n=i.n(s),a=i(17),o=i.n(a),r=i(18),c=i.n(r),u=i(20),l=i.n(u);e.default={components:{"m-header":n.a,city:o.a,citylist:c.a,distribution:l.a},created:function(){var t=this;this.$http.get("http://apps.homed.me/payTest/juhe/server.php",{params:{api:"cityList"}}).then(function(e){var i=JSON.parse(e.bodyText);t.cityList=i.result}),this.$http.get("http://apps.homed.me/payTest/juhe/server.php",{params:{api:"distribution",parm:"&city="+this.city.code}}).then(function(e){var i=JSON.parse(e.bodyText),s=i.result;s=s.slice(6,7),t.distribution=s})},data:function(){return{city:{},cityList:{},isShowCitylist:!1,distribution:{}}},watch:{city:function(){var t=this;this.$http.get("http://apps.homed.me/payTest/juhe/server.php",{params:{api:"distribution",parm:"&city="+this.city.code}}).then(function(e){var i=JSON.parse(e.bodyText),s=i.result;s=s.slice(6,7),t.distribution=s})}},methods:{showCityList:function(){this.isShowCitylist=!this.isShowCitylist}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{city:{},cityList:{}},data:function(){return{time:"更新时间 2017-7-7"}},created:function(){},watch:{cityList:function(){}},mounted:function(){this.$nextTick(function(){this.baiduLocation()})},methods:{callShowCityList:function(){this.$parent.showCityList()},baiduLocation:function(){var t=this,e=new BMap.Map("allmap"),i=new BMap.Point(116.331398,39.897445);e.centerAndZoom(i,12);var s=new BMap.Geocoder;(new BMap.Geolocation).getCurrentPosition(function(i){if(this.getStatus()===BMAP_STATUS_SUCCESS){var n=new BMap.Marker(i.point);e.addOverlay(n),e.panTo(i.point),console.log("定位成功"),s.getLocation(i.point,function(e){var i=e.addressComponents;for(var s in t.cityList)i.city===t.cityList[s].region&&(t.$parent.city=t.cityList[s])})}else console.log("failed"+this.getStatus())},{enableHighAccuracy:!0})}},computed:{refreshTime:function(){var t=new Date;return"更新时间: "+t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"  "+t.getHours()+":00"}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{city:{},cityList:{}},created:function(){},watch:{cityList:function(){}},methods:{choseCity:function(t){this.$parent.city=t,this.$parent.showCityList()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{}},created:function(){var t=this;this.$http.get("http://apps.homed.me/payTest/juhe/server.php",{params:{api:"sites",parm:"&entCode="+this.item.EntCode}}).then(function(e){for(var i=JSON.parse(e.bodyText),s=i.result,n=0;n<s.length;n++)t.$http.get("http://apps.homed.me/payTest/juhe/server.php",{params:{api:"loads",parm:"&siteCode="+s[n].Stcode}}).then(function(e){var i=JSON.parse(e.bodyText),s=i.result;if(i.result.length>0){for(var n={Fume:"-1",Nox:"-1",So2:"-1",PH:"-1",COD:"-1","NH3/N":"-1"},a=0;a<s.length;a++)for(var o in s[a])o in n&&(n[o]=s[a][o]);t.pollutant=n}})})},data:function(){return{pollutant:{},primaryPollutant:"",isExtend:!1,extendIcon:"伤",transObj:{Fume:"粉尘",Nox:"氮氧化物",So2:"二氧化硫",PH:"酸碱综合度",COD:"化学耗氧量","NH3/N":"无机氨氮"}}},computed:{isExceed:function(){var t=0,e=0,i={Fume:"50",Nox:"300",So2:"200",COD:"80","NH3/N":"10",PH:1.5};for(var s in this.pollutant){var n=this.pollutant[s];"PH"===s?n>9?(n-9)/9>t&&(t=(n-9)/9,e=s):n<6&&(6-n)/6>t&&(t=(6-n)/6,e=s):n-i[s]>0&&(n-i[s])/i[s]>t&&(t=(n-i[s])/i[s],e=s)}if(t>0)return this.primaryPollutant=e,!0}},methods:{transValue:function(t){return"-1"===t?"-":parseFloat(t)},transKey:function(t){return"So2"===t?"SO2":t},showExtend:function(){this.isExtend=!this.isExtend,this.extendIcon=this.isExtend?"伣":"伤"}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(19),n=i.n(s);e.default={components:{distributionitem:n.a},props:{distribution:{}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{goBack:function(){window.history.go(-1)}},computed:{needBlank:function(){var t=!!(navigator.userAgent.search(/micromessenger/i)<0),e=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t&&e}}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){function s(t){i(15)}var n=i(0)(i(6),i(26),s,null,null);t.exports=n.exports},function(t,e,i){function s(t){i(14)}var n=i(0)(i(7),i(25),s,null,null);t.exports=n.exports},function(t,e,i){function s(t){i(11)}var n=i(0)(i(8),i(22),s,null,null);t.exports=n.exports},function(t,e,i){function s(t){i(13)}var n=i(0)(i(9),i(24),s,null,null);t.exports=n.exports},function(t,e,i){function s(t){i(16)}var n=i(0)(i(10),i(27),s,null,null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"distribution-item"},[i("div",{staticClass:"entName"},[t._v("\n    "+t._s(t.item.EntName)+"\n  ")]),t._v(" "),i("div",{staticClass:"desc"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isExceed,expression:"isExceed"}],staticClass:"exceed"},[t._v("超标")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isExceed,expression:"!isExceed"}],staticClass:"notExceed"},[t._v("未超标")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isExceed,expression:"isExceed"}],staticClass:"primary-pollutant"},[t._v("首要污染物："+t._s(t.primaryPollutant))])]),t._v(" "),i("div",{staticClass:"extend-icon",on:{click:function(e){t.showExtend()}}},[t._v(t._s(t.extendIcon))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"extend"},t._l(t.pollutant,function(e,s,n){return i("div",{staticClass:"extend-item"},[i("div",{staticClass:"extend-item-content"},[i("div",{staticClass:"value"},[t._v(t._s(t.transValue(e)))]),t._v(" "),i("div",{staticClass:"engName"},[i("span",{domProps:{innerHTML:t._s(t.transKey(s))}})]),t._v(" "),i("div",{staticClass:"cnName"},[t._v(t._s(t.transObj[s]))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:(n+1)%3!=0,expression:"((index + 1) % 3 !== 0)"}],staticClass:"extend-item-split"})])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("m-header",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCitylist,expression:"!isShowCitylist"}]}),t._v(" "),i("city",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCitylist,expression:"!isShowCitylist"}],ref:"city",attrs:{city:t.city,cityList:t.cityList}}),t._v(" "),i("citylist",{directives:[{name:"show",rawName:"v-show",value:t.isShowCitylist,expression:"isShowCitylist"}],attrs:{cityList:t.cityList,city:t.city}}),t._v(" "),i("distribution",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCitylist,expression:"!isShowCitylist"}],attrs:{distribution:t.distribution}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"distribution"},[i("ul",t._l(t.distribution,function(t){return i("li",[i("distributionitem",{attrs:{item:t}})],1)}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"citylist"},[i("div",{staticClass:"currCity",on:{click:function(e){t.choseCity(t.city)}}},[t._v("当前城市:"+t._s(t.city.region))]),t._v(" "),i("ul",t._l(t.cityList,function(e){return i("li",{staticClass:"citylist-city",on:{click:function(i){t.choseCity(e)}}},[t._v("\n      "+t._s(e.region)+"\n    ")])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city"},[i("div",{attrs:{id:"allmap"}}),t._v(" "),i("div",{staticClass:"cityName"},[i("span",{staticClass:"location",on:{click:function(e){t.baiduLocation()}}},[t._v("も")]),t._v(" "),i("span",{staticClass:"cityName-text",on:{click:t.callShowCityList}},[t._v(t._s(t.city.region))])]),t._v(" "),i("div",{staticClass:"time"},[t._v(t._s(t.refreshTime))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header",class:{blank:t.needBlank}},[i("div",{staticClass:"back",on:{click:function(e){t.goBack()}}},[i("span",{staticClass:"back-icon"},[t._v("亃")]),t._v("返回")]),t._v(" "),i("div",{staticClass:"title"},[t._v("城市污染查询")])])},staticRenderFns:[]}},,,function(t,e){}],[4]);
//# sourceMappingURL=app.8c997d7d7e1520e279cc.js.map